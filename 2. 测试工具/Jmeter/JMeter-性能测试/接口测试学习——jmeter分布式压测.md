[一只快乐的驴子](https://www.cnblogs.com/caopeiyang/)



## [接口测试学习——jmeter分布式压测](https://www.cnblogs.com/caopeiyang/p/9104574.html)

分布式压测我理解的就是有一台主控机和几台压力机。主控机通过远程控制压力机启动测试，来实现系统不同级别访问量情况下的性能验证。操作步骤如下：

1、启动jmeter自动化工具，界面显示如下图所示。

![img](https://images2018.cnblogs.com/blog/1404752/201805/1404752-20180529124636939-287809402.png)

2、在“测试计划”单击鼠标右键，选择【添加】->【Threads(Users)】->【线程组】，添加一个线程组。

![img](https://images2018.cnblogs.com/blog/1404752/201805/1404752-20180529124831129-449890056.png)

 

3、添加线程以后，设置线程组。

“线程组”可以类似于虚拟用户组，设置“线程数”为100，即我们要测试的是100个用户并发的情况；“Ramp-Up Period（in seconds）”的意思是达到最大线程所需要的时间（单位是秒）。

线程数：100

Ramp-Up Period（in seconds）：10

理解为当线程数达到100时，所花费的时间是10秒

![img](https://images2018.cnblogs.com/blog/1404752/201805/1404752-20180529125410773-413568209.png)

4、在“线程组”单击右键，选择【添加】->【Sampler】->【HTTP请求】，为线程组添加HTTP请求。

 ![img](https://images2018.cnblogs.com/blog/1404752/201805/1404752-20180529125738304-2042105248.png)

5、设置HTTP请求参数如下（例子模拟的是100用户同时打开搜狗导航网址）：

协议：https

服务器名称或IP：123.sougou.com/

端口号：无

方法：GET

路径：/

![img](https://images2018.cnblogs.com/blog/1404752/201805/1404752-20180529130058177-393570447.png)

6、在“测试计划”单击右键，选择【添加】->【监听器】->【查看结果树】，添加结果树，用于查看测试结果

![img](https://images2018.cnblogs.com/blog/1404752/201805/1404752-20180529130412320-86963617.png)

7、到这里，其实就是普通的压力测试了。分布式压测怎么做呢？有几点要求：一是有几台电脑与控制机在同一局域网内。也就是可以互相访问。二是压力机也要安装jmeter。

在主控机的jmeter的bin目录找到配置文件jmeter.properties。找到里面的remote_hosts部分，修改内容为：remote_hosts=xx，xx代表的是压力机的ip。如果是多个压力机，之间使用【，】分隔。

![img](https://images2018.cnblogs.com/blog/1404752/201805/1404752-20180529131449509-326671103.png)

![img](https://images2018.cnblogs.com/blog/1404752/201805/1404752-20180529131919026-113046924.png)

8、接下来就是启动压力机jmeter的bin目录下的jmeter-server.bat文件。

![img](https://images2018.cnblogs.com/blog/1404752/201805/1404752-20180529131138436-1512695209.png)

 9、然后在主控机的jmeter里面。点击【运行】——【远程启动】可以看到所有的压力机，可以选择一台启动，也可以点击【运行】——【远程全部启动】。

![img](https://images2018.cnblogs.com/blog/1404752/201805/1404752-20180529132104947-827854460.png)

10、运行结束以后，在查看结果树或是聚合报告中查看即可。