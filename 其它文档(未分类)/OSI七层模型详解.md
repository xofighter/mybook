![è¿éåå¾çæè¿°](https://img-blog.csdn.net/20160119103952612)

# OSI七层模型 相关协议 缩写

## 应用层

#### HTTP 超文本传输协议

#### FTP 文件传输协议

#### SMTP 简单邮件传输协议

#### TELNET TCP/IP终端仿真协议

#### POP3 邮局协议第三版

#### Finger 用户信息协议

#### NNTP 网络新闻传输协议

#### IMAP4 因特网信息访问协议第四版

#### LPR UNIX 远程打印协议

#### Rwho UNIX 远程 Who协议

#### Rexec UNIX远程执行协议

#### Login UNIX 远程登陆协议

#### RSH UNIX 远程Shell协议

#### NTF HP网络文件传输协议

#### RDA HP 远程数据库访问协议

#### VT 虚拟终端仿真协议

#### RFA HP 远程文件访问协议

#### RPC Remote Process Comm.

#### S-HTTP 安全超文本传输协议

#### GDP网关发现协议

#### X-Window

#### CMOT 基于TCP/IP的CMIP协议

#### SOCKS 安全套接字协议

#### FANP流属性通知协议

#### SLP服务定位协议

#### MSN微软网络服务

#### Radius 远程用户拨号认证服务协议

#### DNS 域名系统

#### NFS网络文件系统协议

#### NIS SUN 网络信息系统协议

#### R-STAT SUN远程状态协议

#### NSM SUN 网络状态监测协议

#### PMAP SUN 端口映射协议

#### Mount

#### LPR UNIX远程打印协议

#### 常用UDP协议的应用层服务

BOOTP引导协议
DHCP动态主机配套协议
NTP网络时间协议
TFTP简单文件传输协议

#### SNMP简单网络管理协议

## 表示层

#### DECnet NSP

#### LPP 轻量级表示协议

#### NBSSN NetBIOS会话服务协议

#### XDP外部数据表示协议

#### IPX

## 会话层

#### SSL 安全套接字层协议

#### TLS传输层安全协议

#### DAP目录访问协议

#### LDAP轻量级目录访问协议

#### RPC远程过程调用协议

#### VINES NETRPC

VFRP
NeTBIOS
IPX

## 传输层

#### XOT 基于tcp之上的X协议

#### Van Jacobson 压缩TCP协议

#### ISO-DE ISO 开发环境-------->NetBISO

#### TALI 传输适配层接口协议

#### DSI、NetBIOS、IP NeTBIOS、ISO-TP SSP、SMB、MSRPC

### UDP用户数据报协议

#### RUDP可靠的用户数据报协议

#### Mobile IP 移动IP协议

## 网络层

#### IP/IPv6 互联网协议/互联网协议第六版

#### ICMPv6互联网控制信息协议第六版

#### ICMP互联网控制信息协议

#### IGMP 互联网组管理协议

#### SLIP 串行线路IP协议

### 安全协议

#### AH 认证头协议

#### ESP 安装封装有效载荷协议

### 路由协议

#### EGP 外部网关协议

#### OSPF 开放最短路径优先协议

#### IGRP 内部网关路由协议

#### NHRP 下一跳解析协议

#### IE-IRGP 增强内部网关路由选择协议

#### RIPng for IPv6 IPv6路由信息协议

#### GGP 网关到网关协议

#### VRRP 虚拟路由器冗余协议

#### PGM 实际通用组播协议

#### RSVP 资源预留协议

#### PIM-DM 密集模式独立组播协议

#### DVMRP 距离矢量组播路由协议

#### RIP2 路由信息协议第二版

#### PIM-SM 稀疏模式独立组播协议

#### MOSPF 组播开放最短路径优先协议

## 数据链路层

#### MPLS 多协议标签交换协议

#### XTP 压缩传输协议

#### DCAP 数据转换客户访问协议

#### SLE 串行连接封装协议

#### IPinIP IP套IP封装协议

### 隧道协议

#### PPTP点对点隧道协议

#### L2F第二层转发协议

#### L2TP 第二层隧道协议

#### ATMP接入隧道管理协议

### Cisco 协议

#### CDP 思科发现协议

#### CGMP 思科组管理协议

### 地址解析协议

#### ARP地址解析协议

#### RAR逆向地址解析协议

## 物理层

#### IEEE 802.2

#### Ethernet v.2

#### Internetwork



---



七层模型，亦称OSI（Open System Interconnection）。参考模型是国际标准化组织（ISO）制定的一个用于计算机或通信系统间互联的标准体系，一般称为OSI参考模型或七层模型。

它是一个七层的、抽象的模型体，不仅包括一系列抽象的术语或概念，也包括具体的协议。

OSI的大部分设计工作实际上只是Honeywell Information System
公司的一个小组完成的，小组的技术负责人是Charlie Bachman。在70年代中期，这个小组主要是为了开发一些原型系统而成立的，主要关注数据库系统的设计。70年代中，为了支持数据库系统的访问，需要一个结构化的分布式通信系统体系结构。
于是这个小组研究了现有的一些解决方案，其中包括IBM公司的SNA(System Network Architecture)、ARPANET（Internet的前身）的协议、以及为标准化的数据库正在研究中的一些表示服务（presentation services）的相关概念，在1977年提出了一个七层的体系结构模型，他们内部称之为分布式系统体系结构（DSA）。
　　与此同时，1977年英国标准化协会向国际标准化组织（ISO）提议，为了定义分布处理之间的通信基础设施，需要一个标准的体系结构。结果，ISO就开放系统互联（OSI）问题成立了一个专委会（TC 97, Subcomittee 16），指定由美国国家标准协会（ANSI）开发一个标准草案，在专委会第一次正式会议之前提交。
Bachman [1]  参加了ANSI早期的会议，并提交了他的七层模型，这个模型就成了提交ISO专委会的唯一的一份草案。
1978年3月，在ISO的OSI专委会在华盛顿召开的会议上，与会专家很快达成了共识，认为这个分层的体系结构能够满足开放式系统的大多数需求，而且具有可扩展的能力，能够满足新的需求。
于是，1978年发布了这个临时版本，1979年稍作细化之后，成了最终的版本。所以，OSI模型和1977年DSA模型基本相同。

![img](https://gss1.bdstatic.com/9vo3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike80%2C5%2C5%2C80%2C26/sign=3a1768f4c6fc1e17e9b284632bf99d66/0dd7912397dda144d48ab350bbb7d0a20df48655.jpg)

应用层
网络服务与最终用户的一个接口。
协议有：HTTP FTP TFTP SMTP SNMP DNS TELNET HTTPS POP3 DHCP
表示层
数据的表示、安全、压缩。（在五层模型里面已经合并到了应用层）
格式有，JPEG、ASCll、DECOIC、加密格式等
会话层
建立、管理、终止会话。（在五层模型里面已经合并到了应用层）
对应主机进程，指本地主机与远程主机正在进行的会话
传输层
定义传输数据的协议端口号，以及流控和差错校验。
协议有：TCP UDP，数据包一旦离开网卡即进入网络传输层
网络层
进行逻辑地址寻址，实现不同网络之间的路径选择。
协议有：ICMP IGMP IP（IPV4 IPV6） ARP RARP
数据链路层
建立逻辑连接、进行硬件地址寻址、差错校验 [2]  等功能。（由底层网络定义协议）
将比特组合成字节进而组合成帧，用MAC地址访问介质，错误发现但不能纠正。
物理层
建立、维护、断开物理连接。（由底层网络定义协议）
TCP/IP 层级模型结构，应用层之间的协议通过逐级调用传输层（Transport layer）、网络层（Network Layer）和物理数据链路层（Physical Data Link）而可以实现应用层的应用程序通信互联。
应用层需要关心应用程序的逻辑细节，而不是数据在网络中的传输活动。应用层其下三层则处理真正的通信细节。在 Internet 整个发展过程中的所有思想和着重点都以一种称为 RFC（Request For Comments）的文档格式存在。针对每一种特定的 TCP/IP 应用，有相应的 RFC [3]  文档。
一些典型的 TCP/IP 应用有 FTP、Telnet、SMTP、SNTP、REXEC、TFTP、LPD、SNMP、NFS、INETD 等。RFC 使一些基本相同的 TCP/IP 应用程序实现了标准化，从而使得不同厂家开发的应用程序可以互相通信



---

OSI – 开放式  系统   互联     参考模型

​     Open  system  Internet  reference module

 

IOS: internet operating system  互联网操作系统

OSI  模型

​    -作用

​       为网络互联提供统一参考标准，实现网络通讯。

​    -结构

​      分为7层，每一层定义和实现不同的功能

​        7-应用层(application)

​               -作用：该层表示的是各种网络应用(程序)

​               -协议：各种编程语言

​               -产品：软件

​        6-表示层(presentation)

​               -可以理解为翻译官

​        5-会话层(session)

​               -会话的创建、管理与删除

​        4-传输层(transport)

​               -作用：为数据传输保驾护航，确保数据稳定有效传输

​               -协议：TCP / UDP

​               -产品：

​        3-网络层

​               -作用：对数据进行编址和路由

​               -协议：IP

​               -产品：路由器、多层交换机

​        2-数据链路层

​               -作用：负责逻辑链路的建立与拆除，负责帧的形成

​               -协议：Ethernet(以太网)

​               -产品：网桥、交换机

​        1-物理层    

​               -作用：负责网络设备的物理特性和电气特性的标准制定

​               -协议：电气协议、工业设计标准

​               -产品：网线、中继器、集线器                

\---------------------------------------------------------

传输介质

​    无线

​      卫星、激光、蓝牙、

​    有线

​       网线、光纤

网线

   -作用：

   -组成：

​        8根铜丝（芯）

   -信号：通过电压表示信号 0 和 1 ，即高电压和低电压。

​    

   -类型：

​       -线序（568A/B）【1-3对调，2-6对调】

​          568B：

​          白橙、橙、白绿、蓝、白蓝、绿、白棕、棕

​          568A:

​          白绿、绿、白橙、蓝、白蓝、橙、白棕、棕

​        1、2：发送数据的

​        3、6：接收数据的

​       4、5、7、8：防止数据传输干扰的                                                                                                                                                                                                                                                                                                                                                                     

​                   网线又称之为“双绞线”

​      直通线-两边线序相同，连接不同设备

​      交叉线-两边线序不同，连接相同设备

​      反转线-两边线序完全相反 – 设备控制线 – console线

-速率

  10Mbps

  100Mbps

  1000Mbps

  10Gbps

   

   5------------------100Mbps

   5e: 超5类--------100Mbps

   6 -----------------1000Mbps

   7------------------  10Gbps

双绞线





光纤

单模光纤：除黄色以外



多模光纤：黄色线

光电转换机，光电转换模块

------

1层- 0,1bit 流；

2层- 数据帧，frame

3层- 数据包，packet

4层- 数据段，segment

7层- 数据流，flow



@进制

​      2进制

​            所有的数值组成中，仅有2个基本元素，0和1

​      10进制

​           所有的数值组成中，仅有10个基本元素，0-9

​      16进制

​           所有的数值组成中，仅有16个基本元素，0-9，a-f

进制间的相关转换

​      注意：

​              1个16进制 等于 4个2进制

​              2个16进制 等于 1个字节                2的16次方=65536

​              所有的16进制前都有OX

​           

1024 512 256 128 64 32 16 8 4 2 1  

​     

@单位

​       bit，位

​       Byte，字节，1个Byte 等于 8bit

​       Kbit ，1000bit

​       Mbit，1000 Kbit

​       Gbit ，1000Mbit

​       Tbit ， 1000Gbit

​       Pbit，  1000Tbit



------



3层地址

​     -实现协议：IP

​     -作用：在一定范围内，唯一的，标识，一个网络设备

​                 也称之为 逻辑地址，可以任意改变；

​                 相当于人类世界中的人的名字

​     -结构：网络位+主机位，共32bit，即4个Byte

​     -表示：

​              1、2进制，让设备看的。

​               2、10进制，让人看。

​                           -点分十进制，如x.x.x.x，X是十进制

​                                   X表示8个bit，取值范围是：0-255

​                                   例如：192.168.100.79

​                                   2进制表示方式：

​                                   11000000.10101000.01100100.01001111

​     -特点：IP地址必须结合子网掩码同时出现



子网掩码  - netmask

​      -作用：

​               区分IP地址中的网络位和主机位

​      -结构：左边永远是1，右边永远是0；

​      -表示：

​               纯2进制

​               点分十进制

​               /n----------->n表示子网掩码中的1个数

​      -实现：

​                1、1个IP地址，必须对应一个子网掩码

​                2、两者均为32bit，一一对应

​                3、子网掩码中1对应的IP地址中的位，称之为网络位

​                4、子网掩码中0对应的IP地址中的位，称之为主机位

​      -特点：

​               1、左边永远是1，右边永远是0

​               2、0和1，永远不会交叉出现

​      -相关概念：

​              反掩码，即子网掩码中的0和1进行颠倒

特殊的IP地址：（不能配置在设备上进行使用）

​            网络IP地址：表示一个IP网络范围，不代表任何主机

​                    定义

​                          主机位，全为0，的地址，称之为网络地址 

​           广播IP地址：表示的是一个范围内所有设备具备唯一性

​                    -定义

​                           主机位，全为1，的地址，称之为广播地址

例如：192.168.78.6     255.255.255.0

​                 写出改地址对应的网络地址和广播地址

​                 网络地址-192.168.78.0         /24或255.255.255.0

​                 广播地址-192.168.78.255     /24或255.255.255.0



​        1、区分IP地址的网络位和主机位

​                -依靠子网掩码来实现

​        2、IP地址必须结合子网掩码同时出现

​        3、将主机位，全部换为0，然后书写IP地址-网络地址

​        4、将主机位，全部换为1，然后书写IP地址-广播地址

练习：192.168.156.1    255.255.255.0        可以用

​          192.168.8.178    255.255.240.0        可以用

​          192.168.79.130  255.255.255.192    可以用 

练习：192.168.1.1   255.255.255.0

​           网络地址-192.168.1.0  255.255.255.0

​           广播地址-192.168.1.255 255.255.255.0

​           可用主机地址的个数： 254 ；

​    

​          192.168.1.1  255.255.0.0

​          网络地址-192.168.0.0       255.255.0.0

​          广播地址-192.168.255.255   255.255.0.0

​          该网段包含多少个IP地址：65536

​          该网段包含多少个可用的主机IP地址：65534

​       

------

------



IP分类

​      为了便于IP地址的管理，才进行分类。

​    -原则：

​              基于IP地址中第一个字节前面几个几个固定bit

A类

  第一个字节中的前面1个bit，固定不变，为0的地址；

  第一个字节为：0xxx xxxx

  0-127

  0.0.0.0---127.255.255.255  默认子网掩码：255.255.255.0

B类

  第一个字节中的前面2个bit，固定不变，为0的地址；

  第一个字节为：10xx xxxx

  128-191

  128.0.0.0---191.255.255.255  默认子网掩码：255.255.0.0

C类

  第一个字节中的前面3个bit，固定不变，为0的地址；

  第一个字节为：110x xxxx

  192-223

  128.0.0.0---191.255.255.255  默认子网掩码：255.0.0.0

D类

  第一个字节中的前面4个bit，固定不变，为0的地址；

  第一个字节为：1110 xxxx

  224-239

  128.0.0.0---191.255.255.255  默认子网掩码：无

E类

  剩下的都是E类

240-254

注意：

​        IP地址分类，表示基于子网掩码

​        每一个网段中，都有2个特殊IP地址不可以使用

​        A类中的特殊地址，不可以配置在网络设备上；

​               以0开头的都不能配置使用

​               以127开头的，不能配置使用

​            IP地址空间共包含2的32次方个地址，即4294967296，约43亿





---



OSI是一个[开放性](https://baike.baidu.com/item/开放性/3129237)的通信系统互连参考模型，他是一个定义得非常好的协议规范。OSI模型有7层结构，每层都可以有几个子层。 OSI的7层从上到下分别是 7 [应用层](https://baike.baidu.com/item/应用层/4329788) 6 [表示层](https://baike.baidu.com/item/表示层/4329716) 5 会话层 4 [传输层](https://baike.baidu.com/item/传输层/4329536) 3 网络层 2 [数据链路层](https://baike.baidu.com/item/数据链路层/4329290) 1 [物理层](https://baike.baidu.com/item/物理层/4329158) ；其中高层（即7、6、5、4层）定义了应用程序的功能，下面3层（即3、2、1层）主要面向通过网络的端到端的[数据流](https://baike.baidu.com/item/数据流/3002243)。



- 中文名

  网络七层协议

- 外文名

  Open System Interconnection

- 英文缩写

  OSI

- 属    性

  开放式系统互联参考模型

1. https://baike.baidu.com/item/网络七层协议/6056879#7)



## 各层功能



### 应用层

与其它计算机进行通讯的一个应用，它是对应应用程序的通信服务的。例如，一个没有通信功能的字处理程序就不能执行通信的[代码](https://baike.baidu.com/item/代码)，从事字[处理](https://baike.baidu.com/item/处理)工作的程序员也不关心OSI的第7层。但是，如果添加了一个传输文件的选项，那么字[处理器](https://baike.baidu.com/item/处理器)的程序就需要实现OSI的第7层。示例：[TELNET](https://baike.baidu.com/item/TELNET/810597)，[HTTP](https://baike.baidu.com/item/HTTP/243074)，[FTP](https://baike.baidu.com/item/FTP/13839)，[NFS](https://baike.baidu.com/item/NFS/812203)，[SMTP](https://baike.baidu.com/item/SMTP/175887)等。



### 表示层

这一层的主要功能是定义数据格式及加密。例如，FTP允许你选择以二进制或ASCII格式传输。如果选择二进制，那么发送方和接收方不改变文件的内容。如果选择ASCII格式，发送方将把文本从发送方的[字符集](https://baike.baidu.com/item/字符集)转换成标准的ASCII后发送数据。在接收方将标准的ASCII转换成接收方计算机的字符集。示例：加密，ASCII等。



### 会话层

它定义了如何开始、控制和结束一个会话，包括对多个双向消息的控制和管理，以便在只完成连续消息的一部分时可以通知应用，从而使表示层看到的数据是连续的，在某些情况下，如果表示层收到了所有的[数据](https://baike.baidu.com/item/数据/5947370)，则用数据代表表示层。示例：RPC，SQL等。



### 传输层

这层的功能包括是否选择差错恢复协议还是无差错恢复协议，及在同一[主机](https://baike.baidu.com/item/主机)上对不同应用的[数据流](https://baike.baidu.com/item/数据流)的输入进行复用，还包括对收到的顺序不对的[数据包](https://baike.baidu.com/item/数据包)的重新排序功能。示例：[TCP](https://baike.baidu.com/item/TCP/33012)，[UDP](https://baike.baidu.com/item/UDP/571511)，[SPX](https://baike.baidu.com/item/SPX/610336)。



### 网络层

这层对端到端的包传输进行定义，它定义了能够标识所有结点的[逻辑地址](https://baike.baidu.com/item/逻辑地址)，还定义了[路由](https://baike.baidu.com/item/路由)实现的方式和学习的方式。为了适应[最大传输单元](https://baike.baidu.com/item/最大传输单元)长度小于包长度的[传输介质](https://baike.baidu.com/item/传输介质)，网络层还定义了如何将一个包分解成更小的包的分段方法。示例：IP，IPX等。



### 数据链路层

它定义了在单个链路上如何传输数据。这些协议与被讨论的各种介质有关。示例：[ATM](https://baike.baidu.com/item/ATM/8314845)，[FDDI](https://baike.baidu.com/item/FDDI/572177)等。



### 物理层

OSI的物理层规范是有关[传输介质](https://baike.baidu.com/item/传输介质)的特性，这些规范通常也参考了其他组织制定的标准。连接头、帧、帧的使用、电流、编码及光调制等都属于各种物理层规范中的内容。物理层常用多个规范完成对所有细节的定义。示例：[Rj45](https://baike.baidu.com/item/Rj45/3401007)，[802.3](https://baike.baidu.com/item/802.3/960717)等。



## 分层优点

编辑

**（1）人们可以很容易的讨论和学习协议的规范细节。**

（2）层间的标准接口方便了工程模块化。

（3）创建了一个更好的互连环境。

（4）降低了复杂度，使程序更容易修改，产品开发的速度更快。

（5）每层利用紧邻的下层服务，更容易记住各层的功能。

大多数的计算机网络都采用层次式结构，即将一个计算机网络分为若干层次，处在高层次的系统仅是利用较低层次的系统提供的接口和功能，不需了解低层实现该功能所采用的算法和协议；较低层次也仅是使用从高层系统传送来的参数，这就是层次间的无关性。因为有了这种无关性，层次间的每个模块可以用一个新的模块取代，只要新的模块与旧的模块具有相同的功能和接口，即使它们使用的算法和协议都不一样。

网络中的计算机与终端间要想正确的传送信息和数据，必须在数据传输的顺序、数据的格式及内容等方面有一个约定或规则，这种约定或规则称做协议。



## 主要组成

编辑



### 语义

是对协议元素的含义进行解释，不同类型的协议元素所规定的语义是不同的。例如需要发出何种控制信息、完成何种动作及得到的响应等。



### 语法

将若干个协议元素和数据组合在一起用来表达一个完整的内容所应遵循的格式，也就是对信息的数据结构做一种规定。例如用户数据与控制信息的结构与格式等。



### 时序

对事件实现顺序的详细说明。例如在双方进行通信时，发送点发出一个数据[报文](https://baike.baidu.com/item/报文)，如果目标点正确收到，则回答源点接收正确；若接收到错误的信息，则要求源点重发一次。



## 发展

编辑

70年代以来，国外一些主要计算机生产厂家先后推出了各自的[网络体系结构](https://baike.baidu.com/item/网络体系结构)，但它们都属于专用的。

为使不同计算机厂家的计算机能够互相通信，以便在更大的范围内建立计算机网络，有必要建立一个国际范围的网络体系结构标准。

[国际标准化组织](https://baike.baidu.com/item/国际标准化组织)ISO 于1981年正式推荐了一个网络系统结构----七层参考模型 [1]  ，叫做[开放系统互连](https://baike.baidu.com/item/开放系统互连)模型(Open System Interconnection，OSI)。由于这个标准模型的建立,使得各种计算机网络向它靠拢，大大推动了[网络通信](https://baike.baidu.com/item/网络通信)的发展。

OSI 参考模型将整个网络通信的功能划分为七个层次，见图1。它们由低到高分别是[物理层](https://baike.baidu.com/item/物理层)(PH)、[数据链路层](https://baike.baidu.com/item/数据链路层)(DL)、网络层(N)、[传输层](https://baike.baidu.com/item/传输层)(T)、会话层(S)、[表示层](https://baike.baidu.com/item/表示层)(P)、[应用层](https://baike.baidu.com/item/应用层)(A)。每层完成一定的功能，每层都直接为其上层提供服务，并且所有层次都互相支持。第四层到第七层主要负责[互操作性](https://baike.baidu.com/item/互操作性)，而一层到三层则用于创造两个[网络设备](https://baike.baidu.com/item/网络设备)间的物理连接。



## 详细介绍

编辑



### 物理层

物理层是OSI的第一层，它虽然处于最底层，却是整个开放系统的基础。[物理层](https://baike.baidu.com/item/物理层)为设备之间的数据通信提供传输媒体及互连设备，为数据传输提供可靠的环境。

**1.1媒体和互连设备**

物理层的媒体包括架空明线、平衡电缆、光纤、无线信道等。通信用的互连设备指DTE和DCE间的互连设备。DTE即[数据终端设备](https://baike.baidu.com/item/数据终端设备)，又称[物理设备](https://baike.baidu.com/item/物理设备)，如计算机、终端等都包括在内。而DCE则是数据通信设备或电路连接设备，如[调制解调器](https://baike.baidu.com/item/调制解调器)等。数据传输通常是经过DTE——DCE，再经过DCE——DTE的路径。互连设备指将DTE、DCE连接起来的装置，如各种插头、插座。LAN中的各种粗、细同轴电缆、T型接、插头，接收器，发送器，[中继器](https://baike.baidu.com/item/中继器)等都属[物理层](https://baike.baidu.com/item/物理层)的媒体和连接器。

**1.2**物理层的主要功能

1.2.1为数据端设备提供传送数据的通路，[数据通路](https://baike.baidu.com/item/数据通路)可以是一个[物理媒体](https://baike.baidu.com/item/物理媒体)，也可以是多个物理媒体连接而成。一次完整的数据传输，包括激活物理连接，传送数据，终止物理连接.所谓激活，就是不管有多少物理媒体参与，都要在通信的两个[数据终端设备](https://baike.baidu.com/item/数据终端设备)间连接起来，形成一条通路。

1.2.2传输数据.物理层要形成适合数据传输需要的实体，为数据传送服务。一是要保证数据能在其上正确通过，二是要提供足够的[带宽](https://baike.baidu.com/item/带宽)(带宽是指每秒钟内能通过的比特(BIT)数)，以减少信道上的拥塞。传输数据的方式能满足点到点，一点到多点，串行或并行，半双工或全双工，同步或[异步传输](https://baike.baidu.com/item/异步传输)的需要。

**1.3**[物理层](https://baike.baidu.com/item/物理层)的一些重要标准

物理层的一些标准和协议早在OSI/TC97/C16 分技术委员会成立之前就已制定并在应用了,OSI也制定了一些标准并采用了一些已有的成果.下面将一些重要的标准列出,以便读者查阅.ISO2110:称为"数据通信----25芯DTE/DCE接口连接器和插针分配"。它与EIA(美国电子工业协会)的"RS-232-C"基本兼容。ISO2593:称为"数据通信----34芯DTE/DCE----接口连接器和插针分配"。ISO4092:称为"数据通信----37芯DTE/DEC----接口连接器和插针分配".与EIA[RS-449](https://baike.baidu.com/item/RS-449)兼容。CCITT V.24:称为"数据终端设备(DTE)和数据电路终接设备之间的接口电路定义表".其功能与EIARS-232-C及RS-449兼容于100序列线上。



### 数据链路层

数据链路可以粗略地理解为数据通道。[物理层](https://baike.baidu.com/item/物理层)要为[终端设备](https://baike.baidu.com/item/终端设备)间的数据通信提供传输媒体及其连接.媒体是长期的,连接是有生存期的.在连接生存期内,收发两端可以进行不等的一次或多次数据通信.每次通信都要经过建立通信联络和拆除通信联络两过程.这种建立起来的数据收发关系就叫作数据链路.而在[物理媒体](https://baike.baidu.com/item/物理媒体)上传输的数据难免受到各种不可靠因素的影响而产生差错,为了弥补物理层上的不足,为上层提供无差错的数据传输,就要能对数据进行检错和纠错.数据链路的建立,拆除,对数据的检错,纠错是数据链路层的基本任务。

**2.1**[链路层](https://baike.baidu.com/item/链路层)的主要功能

链路层是为网络层提供[数据传送](https://baike.baidu.com/item/数据传送)服务的,这种服务要依靠本层具备的功能来实现。链路层应具备如下功能:

2.1.1链路连接的建立，拆除，分离。

2.1.2[帧定界](https://baike.baidu.com/item/帧定界)和[帧同步](https://baike.baidu.com/item/帧同步)。链路层的数据传输单元是帧,协议不同,帧的长短和界面也有差别，但无论如何必须对帧进行定界。

2.1.3顺序控制,指对帧的收发顺序的控制。

2.1.4差错检测和恢复。还有链路标识,[流量控制](https://baike.baidu.com/item/流量控制)等等.差错检测多用方阵码[校验和](https://baike.baidu.com/item/校验和)循环码校验来检测信道上数据的误码,而帧丢失等用序号检测.各种错误的恢复则常靠反馈重发技术来完成。

**2.2**[数据链路层](https://baike.baidu.com/item/数据链路层)的主要协议

数据链路层协议是为发对等实体间保持一致而制定的,也为了顺利完成对网络层的服务。主要协议如下：

**2.2.1** ISO1745--1975:"数据通信系统的基本型控制规程".这是一种面向字符的标准,利用10个[控制字符](https://baike.baidu.com/item/控制字符)完成链路的建立，拆除及数据交换.对帧的收发情况及差错恢复也是靠这些字符来完成.ISO1155, ISO1177, ISO2626, ISO2629等标准的配合使用可形成多种链路控制和数据传输方式.

**2.2.2** ISO3309--1984:称为"HDLC 帧结构".ISO4335--1984:称为"HDLC 规程要素 "。ISO7809--1984:称为"HDLC 规程类型汇编"。这3个标准都是为面向比特的数据传输控制而制定的。有人习惯上把这3个标准组合称为高级链路控制规程.

**2.2.3** ISO7776:称为"DTE数据链路层规程".与CCITT X.25LAB"平衡型链路访问规程"相兼容。

**2.3**[链路层](https://baike.baidu.com/item/链路层)产品

独立的链路产品中最常见的当属网卡,网桥也是链路产品。MODEM的某些功能有人认为属于链路层,对此还有争议.[数据链路层](https://baike.baidu.com/item/数据链路层)将本质上不可靠的传输媒体变成可靠的传输通路提供给网络层。在[IEEE802.3](https://baike.baidu.com/item/IEEE802.3)情况下，数据链路层分成了两个子层，一个是[逻辑链路控制](https://baike.baidu.com/item/逻辑链路控制)，另一个是[媒体访问控制](https://baike.baidu.com/item/媒体访问控制)。下图所示为IEEE802.3LAN[体系结构](https://baike.baidu.com/item/体系结构)。

AUI=连接单元接口 PMA=[物理媒体](https://baike.baidu.com/item/物理媒体)连接

MAU=媒体连接单元 PLS=物理信令

MDI=媒体相关接口



### 网络层

网络层的产生也是[网络发展](https://baike.baidu.com/item/网络发展)的结果.在[联机系统](https://baike.baidu.com/item/联机系统)和线路交换的环境中，网络层的功能没有太大意义.当数据终端增多时。它们之间有中继设备相连.此时会出现一台终端要求不只是与唯一的一台而是能和多台终端通信的情况,这就是产生了把任意两台[数据终端设备](https://baike.baidu.com/item/数据终端设备)的数据链接起来的问题,也就是路由或者叫寻径。另外,当一条物理信道建立之后,被一对用户使用,往往有许多空闲时间被浪费掉.人们自然会希望让多对用户共用一条链路，为解决这一问题就出现了逻辑信道技术和[虚拟电路](https://baike.baidu.com/item/虚拟电路)技术。

**3.1**网络层主要功能

网络层为建立网络连接和为上层提供服务,应具备以下主要功能：

3.1.1[路由选择](https://baike.baidu.com/item/路由选择)和中继.

3.1.2激活,终止网络连接.

3.1.3在一条数据链路上复用多条网络连接,多采取[分时复用](https://baike.baidu.com/item/分时复用)技术 .

3.1.4差错检测与恢复.

3.1.5排序,[流量控制](https://baike.baidu.com/item/流量控制).

3.1.6服务选择.

3.1.7网络管理.

**3.2**网络层标准简介

网络层的一些主要标准如下：

3.2.1 ISO.DIS8208:称为"DTE用的X.25分组级协议"

3.2.2 ISO.DIS8348:称为"CO 网络服务定义"(面向连接)

3.2.3 ISO.DIS8349:称为"CL 网络服务定义"(面向无连接)

3.2.4 ISO.DIS8473:称为"CL 网络协议"

3.2.5 ISO.DIS8348:称为"网络层寻址"

3.2.6 除上述标准外,还有许多标准。这些标准都只是解决网络层的部分功能,所以往往需要在网络层中同时使用几个标准才能完成整个网络层的功能.由于面对的网络不同,网络层将会采用不同的标准组合.

在具有开放特性的网络中的[数据终端设备](https://baike.baidu.com/item/数据终端设备),都要配置网络层的功能.现在市场上销售的网络硬设备主要有[网关](https://baike.baidu.com/item/网关)和[路由器](https://baike.baidu.com/item/路由器).



### 传输层

传输层是两台计算机经过网络进行数据通信时,第一个端到端的层次，具有缓冲作用。当网络层服务质量不能满足要求时，它将服务加以提高，以满足高层的要求；当网络层服务质量较好时，它只用很少的工作。传输层还可进行复用，即在一个网络连接上创建多个逻辑连接。 传输层也称为[运输层](https://baike.baidu.com/item/运输层).传输层只存在于端开放系统中,是介于低3层[通信子网](https://baike.baidu.com/item/通信子网)系统和高3层之间的一层,但是很重要的一层.因为它是源端到目的端对数据传送进行控制从低到高的最后一层.

有一个既存事实，即世界上各种通信子网在性能上存在着很大差异.例如电话交换网,分组交换网,公用数据交换网，局域网等通信子网都可互连,但它们提供的吞吐量,传输速率,数据延迟通信费用各不相同.对于会话层来说,却要求有一性能恒定的界面.[传输层](https://baike.baidu.com/item/传输层)就承担了这一功能.它采用分流/合流，复用/解复用技术来调节上述通信子网的差异,使会话层感受不到.

此外传输层还要具备差错恢复，[流量控制](https://baike.baidu.com/item/流量控制)等功能,以此对会话层屏蔽通信子网在这些方面的细节与差异.传输层面对的[数据对象](https://baike.baidu.com/item/数据对象)已不是[网络地址](https://baike.baidu.com/item/网络地址)和[主机地址](https://baike.baidu.com/item/主机地址),而是和会话层的界面端口.上述功能的最终目的是为会话提供可靠的,无误的数据传输.传输层的服务一般要经历传输连接建立阶段,[数据传送](https://baike.baidu.com/item/数据传送)阶段,传输连接释放阶段3个阶段才算完成一个完整的服务过程.而在数据传送阶段又分为一般数据传送和加速数据传送两种。传输层服务分成5种类型.基本可以满足对传送质量,[传送速度](https://baike.baidu.com/item/传送速度),传送费用的各种不同需要.传输层的协议标准有以下几种：

ISO8072:称为"面向连接的传输服务定义"

ISO8072:称为"面向连接的传输协议规范"



### 会话层

会话层提供的服务可使应用建立和维持会话，并能使会话获得同步。会话层使用[校验点](https://baike.baidu.com/item/校验点)可使通信会话在通信失效时从校验点继续恢复通信。这种能力对于传送大的文件极为重要。会话层,[表示层](https://baike.baidu.com/item/表示层),[应用层](https://baike.baidu.com/item/应用层)构成开放系统的高3层，面对应用进程提供[分布处理](https://baike.baidu.com/item/分布处理)，对话管理,信息表示,恢复最后的差错等.

会话层同样要担负应用进程服务要求，而[运输层](https://baike.baidu.com/item/运输层)不能完成的那部分工作,给运输层功能差距以弥补.主要的功能是对话管理，[数据流](https://baike.baidu.com/item/数据流)同步和重新同步。要完成这些功能,需要由大量的服务单元功能组合,已经制定的功能单元已有几十种.现将会话层主要功能介绍如下.

**5.1为会话实体间建立连接。**

为给两个对等会话服务用户建立一个会话连接,应该做如下几项工作：

5.1.1将会话地址映射为运输地址

5.1.2选择需要的运输服务质量参数(QOS)

5.1.3对会话参数进行协商

5.1.3识别各个会话连接

5.1.4传送有限的透明用户数据

**5.2数据传输阶段**

这个阶段是在两个会话用户之间实现有组织的,同步的数据传输.用户[数据单元](https://baike.baidu.com/item/数据单元)为SSDU,而[协议数据单元](https://baike.baidu.com/item/协议数据单元)为SPDU.会话用户之间的[数据传送](https://baike.baidu.com/item/数据传送)过程是将SSDU转变成SPDU进行的.

**5.3连接释放**

连接释放是通过"有序释放","废弃"，"有限量透明用户数据传送"等功能单元来释放会话连接的.会话层标准为了使会话连接建立阶段能进行功能协商，也为了便于其它国际标准参考和引用,定义了12种功能单元.各个系统可根据自身情况和需要，以核心功能服务单元为基础,选配其他功能单元组成合理的会话服务子集.会话层的主要标准有"DIS8236:会话服务定义"和"DIS8237:会话协议规范".



### 表示层

表示层的作用之一是为异种机通信提供一种公共语言，以便能进行互操作。这种类型的服务之所以需要，是因为不同的[计算机体系结构](https://baike.baidu.com/item/计算机体系结构)使用的数据表示法不同。例如，IBM[主机](https://baike.baidu.com/item/主机)使用EBCDIC编码，而大部分PC机使用的是ASCII码。在这种情况下，便需要会话层来完成这种转换。

通过前面的介绍,我们可以看出,会话层以下5层完成了端到端的[数据传送](https://baike.baidu.com/item/数据传送),并且是可靠,无差错的传送.但是数据传送只是手段而不是目的,最终是要实现对数据的使用.由于各种系统对数据的定义并不完全相同,最易明白的例子是键盘,其上的某些键的含义在许多系统中都有差异.这自然给利用其它系统的数据造成了障碍.[表示层](https://baike.baidu.com/item/表示层)和[应用层](https://baike.baidu.com/item/应用层)就担负了消除这种障碍的任务.

对于用户数据来说,可以从两个侧面来分析,一个是数据含义被称为语义,另一个是数据的表示形式,称做语法.像文字,图形,声音,文种,压缩,加密等都属于语法范畴.表示层设计了3类15种功能单位,其中上下文管理功能单位就是沟通用户间的数据编码规则,以便双方有一致的数据形式,能够互相认识.ISO表示层为服务,协议,文本通信符制定了DP8822,DP8823,DIS6937/2等一系列标准.



### 应用层

应用层向应用程序提供服务，这些服务按其向应用程序提供的特性分成组，并称为服务元素。有些可为多种应用程序共同使用，有些则为较少的一类应用程序使用。应用层是开放系统的最高层,是直接为应用进程提供服务的。其作用是在实现多个系统应用进程相互通信的同时,完成一系列业务处理所需的服务.其服务元素分为两类:公共应用服务元素CASE和特定应用服务元素SASE.CASE提供最基本的服务,它成为应用层中任何用户和任何服务元素的用户，主要为应用[进程通信](https://baike.baidu.com/item/进程通信),分布系统实现提供基本的控制机制.特定服务SASE则要满足一些特定服务,如文卷传送,访问管理,作业传送,银行事务,订单输入等.

这些将涉及到[虚拟终端](https://baike.baidu.com/item/虚拟终端),作业传送与操作,文卷传送及访问管理,远程数据库访问,图形核心系统,[开放系统互连](https://baike.baidu.com/item/开放系统互连)管理等等.应用层的标准有DP8649"公共应用服务元素",DP8650"公共应用服务元素用协议",文件传送,访问和管理服务及协议.



## 总结

编辑

OSI[七层模型](https://baike.baidu.com/item/七层模型)是一个理论模型，实际应用则千变万化，因此更多把它作为分析、评判各种网络技术的依据；对大多数应用来说，只将它的协议族（即协议堆栈）与七层模型作大致的对应，看看实际用到的特定协议是属于七层中某个子层，还是包括了上下多层的功能。



## 好处

编辑

1.使人们容易探讨和理解协议的许多细节。

2.在各层间标准化接口，允许不同的产品只提供各层功能的一部分，（如[路由器](https://baike.baidu.com/item/路由器)在一到三层），或者只提供协议功能的一部分。（如Win95中的Microsoft TCP/IP）

\3. 创建更好集成的环境。

\4. 减少复杂性，允许更容易编程改变或快速评估。

\5. 用各层的headers和trailers排错。

6.较低的层为较高的层提供服务。

\7. 把复杂的网络划分成为更容易管理的层。



---

# [网络七层协议的通俗理解](https://www.cnblogs.com/carlos-mm/p/6297197.html)



![img](https://images2015.cnblogs.com/blog/784487/201701/784487-20170118164512515-2009100776.png)

 

OSI七层模式简单通俗理解

 

这个模型学了好多次，总是记不住。今天又看了一遍，发现用历史推演的角度去看问题会更有逻辑，更好记。本文不一定严谨，可能有错漏，主要是抛砖引玉，帮助记性不好的人。总体来说，OSI模型是从底层往上层发展出来的。

 

这个模型推出的最开始，是是因为美国人有两台机器之间进行通信的需求。

 

需求1：

 

科学家要解决的第一个问题是，两个硬件之间怎么通信。具体就是一台发些比特流，然后另一台能收到。

 

于是，科学家发明了物理层：

 

主要定义物理设备标准，如网线的接口类型、光纤的接口类型、各种传输介质的传输速率等。它的主要作用是传输比特流(就是由1、0转化为电流强弱来进行传输，到达目的地后在转化为1、0，也就是我们常说的数模转换与模数转换)。这一层的数据叫做比特。

 

需求2：

 

现在通过电线我能发数据流了，但是，我还希望通过无线电波，通过其它介质来传输。然后我还要保证传输过去的比特流是正确的，要有纠错功能。

  

于是，发明了数据链路层：

 

定义了如何让格式化数据以进行传输，以及如何让控制对物理介质的访问。这一层通常还提供错误检测和纠正，以确保数据的可靠传输。

 

需求3：

 

现在我能发正确的发比特流数据到另一台计算机了，但是当我发大量数据时候，可能需要好长时间，例如一个视频格式的，网络会中断好多次（事实上，即使有了物理层和数据链路层，网络还是经常中断，只是中断的时间是毫秒级别的）。

 

那么，我还须要保证传输大量文件时的准确性。于是，我要对发出去的数据进行封装。就像发快递一样，一个个地发。

 

于是，先发明了传输层（传输层在OSI模型中，是在网络层上面）

 

例如TCP，是用于发大量数据的，我发了1万个包出去，另一台电脑就要告诉我是否接受到了1万个包，如果缺了3个包，就告诉我是第1001，234，8888个包丢了，那我再发一次。这样，就能保证对方把这个视频完整接收了。

 

例如UDP，是用于发送少量数据的。我发20个包出去，一般不会丢包，所以，我不管你收到多少个。在多人互动游戏，也经常用UDP协议，因为一般都是简单的信息，而且有广播的需求。如果用TCP，效率就很低，因为它会不停地告诉主机我收到了20个包，或者我收到了18个包，再发我两个！如果同时有1万台计算机都这样做，那么用TCP反而会降低效率，还不如用UDP，主机发出去就算了，丢几个包你就卡一下，算了，下次再发包你再更新。

 

TCP协议是会绑定IP和端口的协议，下面会介绍IP协议。

 

需求4：

 

传输层只是解决了打包的问题。但是如果我有多台计算机，怎么找到我要发的那台？或者，A要给F发信息，中间要经过B，C，D,E，但是中间还有好多节点如K.J.Z.Y。我怎么选择最佳路径？这就是路由要做的事。

 

于是，发明了网络层。即路由器，交换价那些具有寻址功能的设备所实现的功能。这一层定义的是IP地址，通过IP地址寻址。所以产生了IP协议。

  

需求5：

 

现在我们已经保证给正确的计算机，发送正确的封装过后的信息了。但是用户级别的体验好不好？难道我每次都要调用TCP去打包，然后调用IP协议去找路由，自己去发？当然不行，所以我们要建立一个自动收发包，自动寻址的功能。

 

于是，发明了会话层。会话层的作用就是建立和管理应用程序之间的通信。

 

需求6：

 

现在我能保证应用程序自动收发包和寻址了。但是我要用Linux给window发包，两个系统语法不一致，就像安装包一样，exe是不能在linux下用的，shell在window下也是不能直接运行的。于是需要表示层（presentation），帮我们解决不同系统之间的通信语法问题。

 

需求7：

 

OK，现在所有必要条件都准备好了，我们可以写个android程序，web程序去实现需求把。

 

补充：

 

Socket：

 

这不是一个协议，而是一个通信模型。其实它最初是伯克利加州分校软件研究所，简称BSD发明的，主要用来一台电脑的两个进程间通信，然后把它用到了两台电脑的进程间通信。所以，可以把它简单理解为进程间通信，不是什么高级的东西。主要做的事情不就是：

 

A发包：发请求包给某个已经绑定的端口（所以我们经常会访问这样的地址182.13.15.16:1235，1235就是端口）；收到B的允许；然后正式发送；发送完了，告诉B要断开链接；收到断开允许，马上断开，然后发送已经断开信息给B。

 

B收包：绑定端口和IP；然后在这个端口监听；接收到A的请求，发允许给A，并做好接收准备，主要就是清理缓存等待接收新数据；然后正式接收；接受到断开请求，允许断开；确认断开后，继续监听其它请求。

 

可见，Socket其实就是I/O操作。Socket并不仅限于网络通信。在网络通信中，它涵盖了网络层、传输层、会话层、表示层、应用层——其实这都不需要记，因为Socket通信时候用到了IP和端口，仅这两个就表明了它用到了网络层和传输层；而且它无视多台电脑通信的系统差别，所以它涉及了表示层；一般Socket都是基于一个应用程序的，所以会涉及到会话层和应用层。



---

互联网的本质就是一系列的网络协议，这个协议就叫OSI协议（一系列协议），按照功能不同，分工不同，人为的分层七层。实际上这个七层是不存在的。没有这七层的概念，只是人为的划分而已。区分出来的目的只是让你明白哪一层是干什么用的。

每一层都运行不同的协议。协议是干什么的，协议就是标准。

实际上还有人把它划成五层、四层。

七层划分为：应用层、表示层、会话层、传输层、网络层、数据链路层、物理层。

五层划分为：应用层、传输层、网络层、数据链路层、物理层。

四层划分为：应用层、传输层、网络层、网络接口层。



物理层：

字面意思解释：物理传输、硬件、物理特性。在深圳的你与北京的朋友聊天，你的电脑必须要能上网，物理体现是什么？是不是接一根网线，插个路由器，北京的朋友那边是不是也有根网线，也得插个路由器。也就是说计算机与计算机之间的通信，必须要有底层物理层方面的连通，就类似于你打电话，中间是不是必须得连电话线。

中间的物理链接可以是光缆、电缆、双绞线、无线电波。中间传的是电信号，即010101...这些二进制位。



底层传输的010010101001...这些二级制位怎么才能让它有意义呢？



要让这些010010101001...有意思，人为的分组再适合不过了，8位一组，发送及接收都按照8位一组来划分。接收到8位为一组的话，那么就可以按照这8位数来做运算。如果没有分组，对方接收的计算机根本就不知道从哪一位开始来做计算，也解析不了收到的数据。我发了16位你就按照16位来做计算吗？我发100位你就按照100位做计算吗？没什么意义是吧。因此要想让底层的电信号有意义，必须要把底层的电信号做分组。我做好8位一组，那么我收到数据，我就知道这几个8位做一组，这几个8位做一组。那么每个8位就可以得到一个确定的数。分组是谁干的活呢？物理层干不了，这个是数据链路层干的。

数据链路层

早期的时候，数据链路层就是来对电信号来做分组的。以前每个公司都有自己的分组方式，非常的乱，后来形成了统一的标准（标准就是协议），即以太网协议Ethernet。

Ethernet规定

一组电信号称之为一个数据包，或者叫做一个“帧”

每一数据帧分成：报头head和数据data两部分


head包含：（固定18个字节）

发送者（源地址，6个字节）
接收者（目标地址，6个字节）
数据类型（6个字节）
data包含：（最短46字节，最长1500字节）

数据包的具体内容
head长度+data长度=最短64字节，最长1518字节，超过最大限制就分片发送。

这就像写信，发送者的地址（源地址）就是你家的地址，接收者地址（目标地址）就是对方的收信地址，你家的路由器就相当于邮局。其实在计算机通信中的源地址和目标地址指的是mac地址。

Mac地址的由来：

head中包含的源和目标地址由来：Ethernet规定接入Internet的设备都必须具备网卡，发送端的和接收端的地址便是指网卡的地址，即Mac地址。

每块网卡出厂时都被烧录上一个实际上唯一的Mac地址，长度为48位2进制，通常由12位16进制数表示，（前六位是厂商编码，后六位是流水线号）



有了mac地址以后，计算机就可以通信了，假设一个教室就是一个局域网（隔离的网络），这个教室里面有几台计算机，计算机的通信和人的通信是一个道理，把教室里面的人都比作一个个计算机，假设教室里面的人都是瞎子，其实计算机就是瞎子的，计算机通信基本靠吼，现在我要找教室里面的飞哥要战狼2的片，然后我就吼一声，说我要找飞哥要战狼2的片，战狼2的片就属于我的数据，但是我在发的时候我是不是要标识我是谁，我要找谁，我是谁就是我的mac地址，我要找谁就是飞哥的mac地址，这两个地址做数据包的头部，再加上数据战狼2的片就构成了一个数据帧。

这个数据包封装好以后就往外发，到物理层以后就全部转成二级制，往外发是怎么发的呢？就是靠吼。即“我是Edison，我找飞哥要战狼2的片”。这么吼了一嗓子以后，全屋子的人都能听到，这就是广播。

计算机底层，只要在一个教室里（一个局域网），都是靠广播的方式，吼。

局域网的理解：什么是互联网，互联网就是由一个个局域网组成，局域网内的计算机不管是对内还是对外都是靠吼，这就是数据链路层的工作方式-----广播。



广播出去以后，所有人都听得见，所有人都会拆开这个包，读发送者是谁，接收者是谁，只要接收者不是自己就丢弃掉。对计算机来说，它会看自己的Mac地址，飞哥收到以后，他就会把片发给我，发送回来同样采用广播的方式了，靠吼。

同一个教室（同一个局域网）的计算机靠吼来通信，那不同教室的计算机又如何？

比如说局域网1的pc1与局域网2的pc10如何通信？你在教室1（局域网1）吼，教室2（局域网2）的人肯定是听不见的。这就是跨网络进行通信，数据链路层就解决不了这个问题了，这就得靠网络层出面了。



在讲网络层之前，其实基于广播的这种通信就可以实现全世界通信了，你吼一声，如果全世界是一个局域网，全世界的计算机肯定可以听得见，从理论上似乎行得通，如果全世界的计算机都在吼，你想一想，这是不是一个灾难。因此，全世界不能是一个局域网。于是就有了网络层。

网络层：

网络层定义了一个IP协议，

你想，我是这个教室的一个学生，我想找隔壁教室一个叫老王的学生，我也不认识老王，那怎么办，我吼？老王在另外一个教室肯定是听不到的。找教室的负责人，这个教室的负责人就负责和隔壁教室的负责人说话，说我们教室的有个学生要找你们教室的老王。往外传的东西交给负责人就可以了，内部的话上面已经提到，通过广播的方式，对外的东西广播失效。教室的负责人就是网关，网关即网络关口的意思。



Mac地址是用来标识你这个教室的某个位置，IP地址是用来标识你在哪个教室（哪个局域网）。你要跨网络发包你是不是要知道对方的IP地址，比如你要访问百度，你肯定得知道百度服务器的IP地址。计算机在发包前，会判断你在哪个教室，对方在哪个教室，如果在一个教室，基于mac地址的广播发包就OK了；如果不在一个教室，即跨网络发包，那么就会把你的包交给教室负责人（网关）来转发。Mac地址及IP地址唯一标识了你在互联网中的位置。

数据链路层中会把网络层的数据包封装到数数据链路层的数据位置，然后再添加上自己的包头，再发给物理层，物理层发给网关，网关再发给对方教室的网关，对方教室的网关收到后在那个教室做广播。

在数据链路层看，数据封装了两层，跟玩俄罗斯套娃有点类似，一层套了一层。



最终变成



现在来看另一个问题，在吼之前怎么知道对方的Mac地址？这就得靠ARP协议。

ARP协议的由来：在你找飞哥要片之前，你的先干一件事，想办法知道飞哥的Mac地址。即你的机器必须先发一个ARP包出去，ARP也是靠广播的方式发，ARP发送广播包的方式如下：



局域网中怎么获取对方的Mac地址：

肯定要知道对方的IP地址，这是最基本的，就像你要访问百度，肯定得知道百度的域名，域名就是百度的IP地址。自己的IP可以轻松获得，自己的Mac也轻松获取，目标Mac为12个F，我们叫广播地址，表达的意思是我想要获取这个目标IP地址172.16.10.11的机器的Mac地址。Mac为12个F代表的是一种功能，这个功能就是获取对方的MAC地址，计算机的Mac永远不可能是12个F。假设是在本教室广播，一嗓子吼出去了，所有人开始解包，只有IP地址是172.16.10.11的这个人才会返回他的Mac地址，其他人全部丢弃。发回来源Mac改成飞哥自己的Mac地址，同时把飞哥的Mac地址放在数据部分。

跨网络怎么获取对方的Mac地址：

通过IP地址区分，计算机运算判断出飞哥不在同一个教室，目标IP就变成了网关的IP了。网关的IP在计算机上配死了，可以轻松获取。





这样网关就会把它的Mac地址返回给你，然后正常发包



网关帮你去找飞哥，但对用户来说，我们根本就感觉不到网关的存在。

传输层

传输层的由来：网络层的ip帮我们区分子网，以太网层的mac帮我们找到主机，然后大家使用的都是应用程序，你的电脑上可能同时开启qq，暴风影音，等多个应用程序，

那么我们通过ip和mac找到了一台特定的主机，如何标识这台主机上的应用程序，答案就是端口，端口即应用程序与网卡关联的编号。

传输层功能：建立端口到端口的通信

补充：端口范围0-65535，0-1023为系统占用端口

tcp协议：

可靠传输，TCP数据包没有长度限制，理论上可以无限长，但是为了保证网络的效率，通常TCP数据包的长度不会超过IP数据包的长度，以确保单个TCP数据包不必再分割。

以太网头	ip 头              	tcp头              	数据                                                    


udp协议：

不可靠传输，”报头”部分一共只有8个字节，总长度不超过65,535字节，正好放进一个IP数据包。

以太网头	ip头                 	    udp头                           	数据              




应用层

应用层由来：用户使用的都是应用程序，均工作于应用层，互联网是开发的，大家都可以开发自己的应用程序，数据多种多样，必须规定好数据的组织形式 。

应用层功能：规定应用程序的数据格式。

例：TCP协议可以为各种各样的程序传递数据，比如Email、WWW、FTP等等。那么，必须有不同协议规定电子邮件、网页、FTP数据的格式，这些应用程序协议就构成了”应用层”。

---------------------

